<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Libraries.Template.Lifting</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();setSynopsis("mini_Libraries-Template-Lifting.html");};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption empty">&nbsp;</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr></table><p class="caption">Libraries.Template.Lifting</p></div><div id="table-of-contents"><p class="caption">Contents</p><ul><li><a href="#g:1">Abstract syntax trees of a simplified language</a></li><li><a href="#g:2">Variable substitution</a></li><li><a href="#g:3">Downgrading Template Haskell to AST</a></li><li><a href="#g:4">Upgrade AST to Template Haskell</a></li><li><a href="#g:5">Lifting AST terms (into AST terms)</a></li><li><a href="#g:6">Various pretty printing functions</a></li><li><a href="#g:7">The main lifting functions.</a></li></ul></div><div id="description"><p class="caption">Description</p><div class="doc"><p>This module describes stripped-down Template Haskell abstract
 syntax trees (ASTs) for a subset of Haskell.</p></div></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><span class="keyword">type</span> <a href="#t:Body">Body</a> = <a href="Libraries-Template-Lifting.html#t:Exp">Exp</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:Lit">Lit</a><ul class="subs"><li>= <a href="#v:CharL">CharL</a> Char</li><li>| <a href="#v:IntegerL">IntegerL</a> Integer</li><li>| <a href="#v:RationalL">RationalL</a> Rational</li></ul></li><li class="src short"><span class="keyword">data</span> <a href="#t:Pat">Pat</a><ul class="subs"><li>= <a href="#v:LitP">LitP</a> <a href="Libraries-Template-Lifting.html#t:Lit">Lit</a></li><li>| <a href="#v:VarP">VarP</a> Name</li><li>| <a href="#v:TupP">TupP</a> [<a href="Libraries-Template-Lifting.html#t:Pat">Pat</a>]</li><li>| <a href="#v:WildP">WildP</a></li><li>| <a href="#v:ListP">ListP</a> [<a href="Libraries-Template-Lifting.html#t:Pat">Pat</a>]</li><li>| <a href="#v:ConP">ConP</a> Name [<a href="Libraries-Template-Lifting.html#t:Pat">Pat</a>]</li></ul></li><li class="src short"><span class="keyword">data</span> <a href="#t:Match">Match</a> = <a href="#v:Match">Match</a> <a href="Libraries-Template-Lifting.html#t:Pat">Pat</a> <a href="Libraries-Template-Lifting.html#t:Body">Body</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:Dec">Dec</a> = <a href="#v:ValD">ValD</a> Name <a href="Libraries-Template-Lifting.html#t:Body">Body</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:Exp">Exp</a><ul class="subs"><li>= <a href="#v:VarE">VarE</a> Name</li><li>| <a href="#v:ConE">ConE</a> Name</li><li>| <a href="#v:LitE">LitE</a> <a href="Libraries-Template-Lifting.html#t:Lit">Lit</a></li><li>| <a href="#v:AppE">AppE</a> <a href="Libraries-Template-Lifting.html#t:Exp">Exp</a> <a href="Libraries-Template-Lifting.html#t:Exp">Exp</a></li><li>| <a href="#v:LamE">LamE</a> Name <a href="Libraries-Template-Lifting.html#t:Exp">Exp</a></li><li>| <a href="#v:TupE">TupE</a> [<a href="Libraries-Template-Lifting.html#t:Exp">Exp</a>]</li><li>| <a href="#v:CondE">CondE</a> <a href="Libraries-Template-Lifting.html#t:Exp">Exp</a> <a href="Libraries-Template-Lifting.html#t:Exp">Exp</a> <a href="Libraries-Template-Lifting.html#t:Exp">Exp</a></li><li>| <a href="#v:LetE">LetE</a> [<a href="Libraries-Template-Lifting.html#t:Dec">Dec</a>] <a href="Libraries-Template-Lifting.html#t:Exp">Exp</a></li><li>| <a href="#v:CaseE">CaseE</a> <a href="Libraries-Template-Lifting.html#t:Exp">Exp</a> [<a href="Libraries-Template-Lifting.html#t:Match">Match</a>]</li><li>| <a href="#v:ListE">ListE</a> [<a href="Libraries-Template-Lifting.html#t:Exp">Exp</a>]</li><li>| <a href="#v:ReturnE">ReturnE</a></li><li>| <a href="#v:MAppE">MAppE</a></li></ul></li><li class="src short"><span class="keyword">data</span> <a href="#t:BindS">BindS</a> = <a href="#v:BindS">BindS</a> Name <a href="Libraries-Template-Lifting.html#t:Exp">Exp</a></li><li class="src short"><a href="#v:doE">doE</a> :: [<a href="Libraries-Template-Lifting.html#t:BindS">BindS</a>] -&gt; <a href="Libraries-Template-Lifting.html#t:Exp">Exp</a> -&gt; <a href="Libraries-Template-Lifting.html#t:Exp">Exp</a></li><li class="src short"><a href="#v:getVarNames">getVarNames</a> :: <a href="Libraries-Template-Lifting.html#t:Pat">Pat</a> -&gt; Set Name</li><li class="src short"><a href="#v:substMatch">substMatch</a> :: Name -&gt; <a href="Libraries-Template-Lifting.html#t:Exp">Exp</a> -&gt; <a href="Libraries-Template-Lifting.html#t:Match">Match</a> -&gt; <a href="Libraries-Template-Lifting.html#t:Match">Match</a></li><li class="src short"><a href="#v:substDec">substDec</a> :: Name -&gt; <a href="Libraries-Template-Lifting.html#t:Exp">Exp</a> -&gt; <a href="Libraries-Template-Lifting.html#t:Dec">Dec</a> -&gt; <a href="Libraries-Template-Lifting.html#t:Dec">Dec</a></li><li class="src short"><a href="#v:substExp">substExp</a> :: Name -&gt; <a href="Libraries-Template-Lifting.html#t:Exp">Exp</a> -&gt; <a href="Libraries-Template-Lifting.html#t:Exp">Exp</a> -&gt; <a href="Libraries-Template-Lifting.html#t:Exp">Exp</a></li><li class="src short"><a href="#v:mapSubstExp">mapSubstExp</a> :: Map Name <a href="Libraries-Template-Lifting.html#t:Exp">Exp</a> -&gt; <a href="Libraries-Template-Lifting.html#t:Exp">Exp</a> -&gt; <a href="Libraries-Template-Lifting.html#t:Exp">Exp</a></li><li class="src short"><a href="#v:litTHtoExpAST">litTHtoExpAST</a> :: Lit -&gt; <a href="Libraries-Template-LiftQ.html#t:LiftQ">LiftQ</a> <a href="Libraries-Template-Lifting.html#t:Exp">Exp</a></li><li class="src short"><a href="#v:litTHtoPatAST">litTHtoPatAST</a> :: Lit -&gt; <a href="Libraries-Template-LiftQ.html#t:LiftQ">LiftQ</a> <a href="Libraries-Template-Lifting.html#t:Pat">Pat</a></li><li class="src short"><a href="#v:normalizePatInExp">normalizePatInExp</a> :: [<a href="Libraries-Template-Lifting.html#t:Pat">Pat</a>] -&gt; <a href="Libraries-Template-LiftQ.html#t:LiftQ">LiftQ</a> ([Name], Map Name <a href="Libraries-Template-Lifting.html#t:Exp">Exp</a>)</li><li class="src short"><a href="#v:whereToLet">whereToLet</a> :: <a href="Libraries-Template-Lifting.html#t:Exp">Exp</a> -&gt; [(<a href="Libraries-Template-Lifting.html#t:Pat">Pat</a>, <a href="Libraries-Template-Lifting.html#t:Exp">Exp</a>)] -&gt; <a href="Libraries-Template-LiftQ.html#t:LiftQ">LiftQ</a> <a href="Libraries-Template-Lifting.html#t:Exp">Exp</a></li><li class="src short"><a href="#v:clauseToMatch">clauseToMatch</a> :: Clause -&gt; <a href="Libraries-Template-LiftQ.html#t:LiftQ">LiftQ</a> <a href="Libraries-Template-Lifting.html#t:Match">Match</a></li><li class="src short"><a href="#v:clausesToLambda">clausesToLambda</a> :: [Clause] -&gt; <a href="Libraries-Template-LiftQ.html#t:LiftQ">LiftQ</a> <a href="Libraries-Template-Lifting.html#t:Exp">Exp</a></li><li class="src short"><a href="#v:expTHtoAST">expTHtoAST</a> :: Exp -&gt; <a href="Libraries-Template-LiftQ.html#t:LiftQ">LiftQ</a> <a href="Libraries-Template-Lifting.html#t:Exp">Exp</a></li><li class="src short"><a href="#v:matchTHtoAST">matchTHtoAST</a> :: Match -&gt; <a href="Libraries-Template-LiftQ.html#t:LiftQ">LiftQ</a> <a href="Libraries-Template-Lifting.html#t:Match">Match</a></li><li class="src short"><a href="#v:bodyTHtoAST">bodyTHtoAST</a> :: Body -&gt; <a href="Libraries-Template-LiftQ.html#t:LiftQ">LiftQ</a> <a href="Libraries-Template-Lifting.html#t:Exp">Exp</a></li><li class="src short"><a href="#v:patTHtoAST">patTHtoAST</a> :: Pat -&gt; <a href="Libraries-Template-LiftQ.html#t:LiftQ">LiftQ</a> <a href="Libraries-Template-Lifting.html#t:Pat">Pat</a></li><li class="src short"><a href="#v:firstLevelDecTHtoAST">firstLevelDecTHtoAST</a> :: Dec -&gt; Maybe (<a href="Libraries-Template-LiftQ.html#t:LiftQ">LiftQ</a> <a href="Libraries-Template-Lifting.html#t:Dec">Dec</a>)</li><li class="src short"><a href="#v:decTHtoAST">decTHtoAST</a> :: Dec -&gt; <a href="Libraries-Template-LiftQ.html#t:LiftQ">LiftQ</a> (<a href="Libraries-Template-Lifting.html#t:Pat">Pat</a>, <a href="Libraries-Template-Lifting.html#t:Exp">Exp</a>)</li><li class="src short"><a href="#v:typReturnE">typReturnE</a> :: <a href="Libraries-Template-LiftQ.html#t:LiftQ">LiftQ</a> Type</li><li class="src short"><a href="#v:typMAppE">typMAppE</a> :: <a href="Libraries-Template-LiftQ.html#t:LiftQ">LiftQ</a> Type</li><li class="src short"><a href="#v:litASTtoTH">litASTtoTH</a> :: <a href="Libraries-Template-Lifting.html#t:Lit">Lit</a> -&gt; Lit</li><li class="src short"><a href="#v:patASTtoTH">patASTtoTH</a> :: <a href="Libraries-Template-Lifting.html#t:Pat">Pat</a> -&gt; Pat</li><li class="src short"><a href="#v:matchASTtoTH">matchASTtoTH</a> :: <a href="Libraries-Template-Lifting.html#t:Match">Match</a> -&gt; <a href="Libraries-Template-LiftQ.html#t:LiftQ">LiftQ</a> Match</li><li class="src short"><a href="#v:decASTtoTH">decASTtoTH</a> :: <a href="Libraries-Template-Lifting.html#t:Dec">Dec</a> -&gt; <a href="Libraries-Template-LiftQ.html#t:LiftQ">LiftQ</a> Dec</li><li class="src short"><a href="#v:expASTtoTH">expASTtoTH</a> :: <a href="Libraries-Template-Lifting.html#t:Exp">Exp</a> -&gt; <a href="Libraries-Template-LiftQ.html#t:LiftQ">LiftQ</a> Exp</li><li class="src short"><a href="#v:liftIntegerL">liftIntegerL</a> :: <a href="Libraries-Template-Lifting.html#t:Exp">Exp</a></li><li class="src short"><a href="#v:liftRationalL">liftRationalL</a> :: <a href="Libraries-Template-Lifting.html#t:Exp">Exp</a></li><li class="src short"><a href="#v:liftLitAST">liftLitAST</a> :: <a href="Libraries-Template-Lifting.html#t:Lit">Lit</a> -&gt; <a href="Libraries-Template-LiftQ.html#t:LiftQ">LiftQ</a> <a href="Libraries-Template-Lifting.html#t:Exp">Exp</a></li><li class="src short"><a href="#v:liftPatAST">liftPatAST</a> :: <a href="Libraries-Template-Lifting.html#t:Pat">Pat</a> -&gt; <a href="Libraries-Template-LiftQ.html#t:LiftQ">LiftQ</a> <a href="Libraries-Template-Lifting.html#t:Pat">Pat</a></li><li class="src short"><a href="#v:liftMatchAST">liftMatchAST</a> :: <a href="Libraries-Template-Lifting.html#t:Match">Match</a> -&gt; <a href="Libraries-Template-LiftQ.html#t:LiftQ">LiftQ</a> <a href="Libraries-Template-Lifting.html#t:Match">Match</a></li><li class="src short"><a href="#v:liftDecAST">liftDecAST</a> :: <a href="Libraries-Template-Lifting.html#t:Dec">Dec</a> -&gt; <a href="Libraries-Template-LiftQ.html#t:LiftQ">LiftQ</a> <a href="Libraries-Template-Lifting.html#t:Dec">Dec</a></li><li class="src short"><a href="#v:liftFirstLevelDecAST">liftFirstLevelDecAST</a> :: <a href="Libraries-Template-Lifting.html#t:Dec">Dec</a> -&gt; <a href="Libraries-Template-LiftQ.html#t:LiftQ">LiftQ</a> <a href="Libraries-Template-Lifting.html#t:Dec">Dec</a></li><li class="src short"><a href="#v:liftExpAST">liftExpAST</a> :: <a href="Libraries-Template-Lifting.html#t:Exp">Exp</a> -&gt; <a href="Libraries-Template-LiftQ.html#t:LiftQ">LiftQ</a> <a href="Libraries-Template-Lifting.html#t:Exp">Exp</a></li><li class="src short"><a href="#v:makeDecTemplate">makeDecTemplate</a> :: <a href="Libraries-Template-Lifting.html#t:Dec">Dec</a> -&gt; <a href="Libraries-Template-LiftQ.html#t:LiftQ">LiftQ</a> <a href="Libraries-Template-Lifting.html#t:Dec">Dec</a></li><li class="src short"><a href="#v:prettyPrintAST">prettyPrintAST</a> :: Q [Dec] -&gt; IO ()</li><li class="src short"><a href="#v:prettyPrintLiftExpTH">prettyPrintLiftExpTH</a> :: Q Exp -&gt; IO ()</li><li class="src short"><a href="#v:prettyPrintLiftExpAST">prettyPrintLiftExpAST</a> :: <a href="Libraries-Template-LiftQ.html#t:LiftQ">LiftQ</a> <a href="Libraries-Template-Lifting.html#t:Exp">Exp</a> -&gt; IO ()</li><li class="src short"><a href="#v:decToMonad">decToMonad</a> :: String -&gt; Q [Dec] -&gt; Q [Dec]</li><li class="src short"><a href="#v:expToMonad">expToMonad</a> :: String -&gt; Q Exp -&gt; Q Exp</li></ul></div><div id="interface"><h1 id="g:1">Abstract syntax trees of a simplified language</h1><div class="top"><p class="src"><span class="keyword">type</span> <a name="t:Body" class="def">Body</a> = <a href="Libraries-Template-Lifting.html#t:Exp">Exp</a></p><div class="doc"><p>There are no &quot;guarded bodies&quot;. One net effect is to make the
 &quot;where&quot; construct equivalent to a simple &quot;let&quot;.</p></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a name="t:Lit" class="def">Lit</a></p><div class="doc"><p>Literals.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:CharL" class="def">CharL</a> Char</td><td class="doc"><p>Characters.</p></td></tr><tr><td class="src"><a name="v:IntegerL" class="def">IntegerL</a> Integer</td><td class="doc"><p>Integers.</p></td></tr><tr><td class="src"><a name="v:RationalL" class="def">RationalL</a> Rational</td><td class="doc"><p>Reals.</p></td></tr></table></div><div class="subs instances"><p id="control.i:Lit" class="caption collapser" onclick="toggleSection('i:Lit')">Instances</p><div id="section.i:Lit" class="show"><table><tr><td class="src">Show <a href="Libraries-Template-Lifting.html#t:Lit">Lit</a></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a name="t:Pat" class="def">Pat</a></p><div class="doc"><p>Patterns.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:LitP" class="def">LitP</a> <a href="Libraries-Template-Lifting.html#t:Lit">Lit</a></td><td class="doc"><p>Literal.</p></td></tr><tr><td class="src"><a name="v:VarP" class="def">VarP</a> Name</td><td class="doc"><p>Variable name.</p></td></tr><tr><td class="src"><a name="v:TupP" class="def">TupP</a> [<a href="Libraries-Template-Lifting.html#t:Pat">Pat</a>]</td><td class="doc"><p>Tuple.</p></td></tr><tr><td class="src"><a name="v:WildP" class="def">WildP</a></td><td class="doc"><p>Wildchar.</p></td></tr><tr><td class="src"><a name="v:ListP" class="def">ListP</a> [<a href="Libraries-Template-Lifting.html#t:Pat">Pat</a>]</td><td class="doc"><p>List as <code>[...]</code>.</p></td></tr><tr><td class="src"><a name="v:ConP" class="def">ConP</a> Name [<a href="Libraries-Template-Lifting.html#t:Pat">Pat</a>]</td><td class="doc"><p>Cons: <code>h:t</code>.</p></td></tr></table></div><div class="subs instances"><p id="control.i:Pat" class="caption collapser" onclick="toggleSection('i:Pat')">Instances</p><div id="section.i:Pat" class="show"><table><tr><td class="src">Show <a href="Libraries-Template-Lifting.html#t:Pat">Pat</a></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a name="t:Match" class="def">Match</a></p><div class="doc"><p>Match term construct.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:Match" class="def">Match</a> <a href="Libraries-Template-Lifting.html#t:Pat">Pat</a> <a href="Libraries-Template-Lifting.html#t:Body">Body</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><p id="control.i:Match" class="caption collapser" onclick="toggleSection('i:Match')">Instances</p><div id="section.i:Match" class="show"><table><tr><td class="src">Show <a href="Libraries-Template-Lifting.html#t:Match">Match</a></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a name="t:Dec" class="def">Dec</a></p><div class="doc"><p>First-level declaration.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:ValD" class="def">ValD</a> Name <a href="Libraries-Template-Lifting.html#t:Body">Body</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><p id="control.i:Dec" class="caption collapser" onclick="toggleSection('i:Dec')">Instances</p><div id="section.i:Dec" class="show"><table><tr><td class="src">Show <a href="Libraries-Template-Lifting.html#t:Dec">Dec</a></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a name="t:Exp" class="def">Exp</a></p><div class="doc"><p>Expression</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:VarE" class="def">VarE</a> Name</td><td class="doc"><p>Variable name.</p></td></tr><tr><td class="src"><a name="v:ConE" class="def">ConE</a> Name</td><td class="doc"><p>Constant name.</p></td></tr><tr><td class="src"><a name="v:LitE" class="def">LitE</a> <a href="Libraries-Template-Lifting.html#t:Lit">Lit</a></td><td class="doc"><p>Literal.</p></td></tr><tr><td class="src"><a name="v:AppE" class="def">AppE</a> <a href="Libraries-Template-Lifting.html#t:Exp">Exp</a> <a href="Libraries-Template-Lifting.html#t:Exp">Exp</a></td><td class="doc"><p>Application.</p></td></tr><tr><td class="src"><a name="v:LamE" class="def">LamE</a> Name <a href="Libraries-Template-Lifting.html#t:Exp">Exp</a></td><td class="doc"><p>Lambda abstraction.</p></td></tr><tr><td class="src"><a name="v:TupE" class="def">TupE</a> [<a href="Libraries-Template-Lifting.html#t:Exp">Exp</a>]</td><td class="doc"><p>Tuple.</p></td></tr><tr><td class="src"><a name="v:CondE" class="def">CondE</a> <a href="Libraries-Template-Lifting.html#t:Exp">Exp</a> <a href="Libraries-Template-Lifting.html#t:Exp">Exp</a> <a href="Libraries-Template-Lifting.html#t:Exp">Exp</a></td><td class="doc"><p>If-then-else.</p></td></tr><tr><td class="src"><a name="v:LetE" class="def">LetE</a> [<a href="Libraries-Template-Lifting.html#t:Dec">Dec</a>] <a href="Libraries-Template-Lifting.html#t:Exp">Exp</a></td><td class="doc"><p>Let-construct.</p></td></tr><tr><td class="src"><a name="v:CaseE" class="def">CaseE</a> <a href="Libraries-Template-Lifting.html#t:Exp">Exp</a> [<a href="Libraries-Template-Lifting.html#t:Match">Match</a>]</td><td class="doc"><p>Case distinction</p></td></tr><tr><td class="src"><a name="v:ListE" class="def">ListE</a> [<a href="Libraries-Template-Lifting.html#t:Exp">Exp</a>]</td><td class="doc"><p>List: <code>[...]</code>.</p></td></tr><tr><td class="src"><a name="v:ReturnE" class="def">ReturnE</a></td><td class="doc"><p>hardcoded constant for <code><code>return</code></code>.</p></td></tr><tr><td class="src"><a name="v:MAppE" class="def">MAppE</a></td><td class="doc"><p>hardcoded constant for <code><code>&gt;&gt;=</code></code>.</p></td></tr></table></div><div class="subs instances"><p id="control.i:Exp" class="caption collapser" onclick="toggleSection('i:Exp')">Instances</p><div id="section.i:Exp" class="show"><table><tr><td class="src">Show <a href="Libraries-Template-Lifting.html#t:Exp">Exp</a></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="doc"><p>Syntactic sugar to recover do-notation.</p></div><div class="top"><p class="src"><span class="keyword">data</span> <a name="t:BindS" class="def">BindS</a></p><div class="doc"><p>Datatype to encode the notation <code>x &lt;- expr</code>.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:BindS" class="def">BindS</a> Name <a href="Libraries-Template-Lifting.html#t:Exp">Exp</a></td><td class="doc empty">&nbsp;</td></tr></table></div></div><div class="top"><p class="src"><a name="v:doE" class="def">doE</a> :: [<a href="Libraries-Template-Lifting.html#t:BindS">BindS</a>] -&gt; <a href="Libraries-Template-Lifting.html#t:Exp">Exp</a> -&gt; <a href="Libraries-Template-Lifting.html#t:Exp">Exp</a></p><div class="doc"><p>A simple <code>do</code>: list of monadic <code>let</code> followed by a computation.</p></div></div><h1 id="g:2">Variable substitution</h1><div class="top"><p class="src"><a name="v:getVarNames" class="def">getVarNames</a> :: <a href="Libraries-Template-Lifting.html#t:Pat">Pat</a> -&gt; Set Name</p><div class="doc"><p>Get the set of variable names in a pattern.</p></div></div><div class="top"><p class="src"><a name="v:substMatch" class="def">substMatch</a> :: Name -&gt; <a href="Libraries-Template-Lifting.html#t:Exp">Exp</a> -&gt; <a href="Libraries-Template-Lifting.html#t:Match">Match</a> -&gt; <a href="Libraries-Template-Lifting.html#t:Match">Match</a></p><div class="doc"><p>Substitution in a <code><code><a href="Libraries-Template-Lifting.html#t:Match">Match</a></code></code>.</p></div></div><div class="top"><p class="src"><a name="v:substDec" class="def">substDec</a> :: Name -&gt; <a href="Libraries-Template-Lifting.html#t:Exp">Exp</a> -&gt; <a href="Libraries-Template-Lifting.html#t:Dec">Dec</a> -&gt; <a href="Libraries-Template-Lifting.html#t:Dec">Dec</a></p><div class="doc"><p>Substitution in a <code><code><a href="Libraries-Template-Lifting.html#t:Dec">Dec</a></code></code>.</p></div></div><div class="top"><p class="src"><a name="v:substExp" class="def">substExp</a> :: Name -&gt; <a href="Libraries-Template-Lifting.html#t:Exp">Exp</a> -&gt; <a href="Libraries-Template-Lifting.html#t:Exp">Exp</a> -&gt; <a href="Libraries-Template-Lifting.html#t:Exp">Exp</a></p><div class="doc"><p>Substitution in an <code><code><a href="Libraries-Template-Lifting.html#t:Exp">Exp</a></code></code>.</p></div></div><div class="top"><p class="src"><a name="v:mapSubstExp" class="def">mapSubstExp</a> :: Map Name <a href="Libraries-Template-Lifting.html#t:Exp">Exp</a> -&gt; <a href="Libraries-Template-Lifting.html#t:Exp">Exp</a> -&gt; <a href="Libraries-Template-Lifting.html#t:Exp">Exp</a></p><div class="doc"><p>Substitution of several variables in one go.</p></div></div><h1 id="g:3">Downgrading Template Haskell to AST</h1><div class="top"><p class="src"><a name="v:litTHtoExpAST" class="def">litTHtoExpAST</a> :: Lit -&gt; <a href="Libraries-Template-LiftQ.html#t:LiftQ">LiftQ</a> <a href="Libraries-Template-Lifting.html#t:Exp">Exp</a></p><div class="doc"><p>Downgrading TH literals to <code><code><a href="Libraries-Template-Lifting.html#t:Exp">Exp</a></code></code>.</p></div></div><div class="top"><p class="src"><a name="v:litTHtoPatAST" class="def">litTHtoPatAST</a> :: Lit -&gt; <a href="Libraries-Template-LiftQ.html#t:LiftQ">LiftQ</a> <a href="Libraries-Template-Lifting.html#t:Pat">Pat</a></p><div class="doc"><p>Downgrading TH literals to <code><code><a href="Libraries-Template-Lifting.html#t:Pat">Pat</a></code></code>.</p></div></div><div class="top"><p class="src"><a name="v:normalizePatInExp" class="def">normalizePatInExp</a> :: [<a href="Libraries-Template-Lifting.html#t:Pat">Pat</a>] -&gt; <a href="Libraries-Template-LiftQ.html#t:LiftQ">LiftQ</a> ([Name], Map Name <a href="Libraries-Template-Lifting.html#t:Exp">Exp</a>)</p><div class="doc"><p>Take a list of patterns coming from a <code>where</code> section and output
 a list of fresh names for normalized <code>let</code>s. Also gives a mapping
 for substituting inside the expressions. Assume all names in the
 list of patterns are distinct.</p></div></div><div class="top"><p class="src"><a name="v:whereToLet" class="def">whereToLet</a> :: <a href="Libraries-Template-Lifting.html#t:Exp">Exp</a> -&gt; [(<a href="Libraries-Template-Lifting.html#t:Pat">Pat</a>, <a href="Libraries-Template-Lifting.html#t:Exp">Exp</a>)] -&gt; <a href="Libraries-Template-LiftQ.html#t:LiftQ">LiftQ</a> <a href="Libraries-Template-Lifting.html#t:Exp">Exp</a></p><div class="doc"><p>Build a <code>let</code>-expression out of pieces.</p></div></div><div class="top"><p class="src"><a name="v:clauseToMatch" class="def">clauseToMatch</a> :: Clause -&gt; <a href="Libraries-Template-LiftQ.html#t:LiftQ">LiftQ</a> <a href="Libraries-Template-Lifting.html#t:Match">Match</a></p><div class="doc"><p>Build a <code><code><a href="Libraries-Template-Lifting.html#t:Match">Match</a></code></code> out of a TH clause</p></div></div><div class="top"><p class="src"><a name="v:clausesToLambda" class="def">clausesToLambda</a> :: [Clause] -&gt; <a href="Libraries-Template-LiftQ.html#t:LiftQ">LiftQ</a> <a href="Libraries-Template-Lifting.html#t:Exp">Exp</a></p><div class="doc"><p>From a list of TH clauses, make a case-distinction wrapped in a
 lambda abstraction.</p></div></div><div class="top"><p class="src"><a name="v:expTHtoAST" class="def">expTHtoAST</a> :: Exp -&gt; <a href="Libraries-Template-LiftQ.html#t:LiftQ">LiftQ</a> <a href="Libraries-Template-Lifting.html#t:Exp">Exp</a></p><div class="doc"><p>Downgrade expressions.</p></div></div><div class="top"><p class="src"><a name="v:matchTHtoAST" class="def">matchTHtoAST</a> :: Match -&gt; <a href="Libraries-Template-LiftQ.html#t:LiftQ">LiftQ</a> <a href="Libraries-Template-Lifting.html#t:Match">Match</a></p><div class="doc"><p>Downgrade match-constructs.</p></div></div><div class="top"><p class="src"><a name="v:bodyTHtoAST" class="def">bodyTHtoAST</a> :: Body -&gt; <a href="Libraries-Template-LiftQ.html#t:LiftQ">LiftQ</a> <a href="Libraries-Template-Lifting.html#t:Exp">Exp</a></p><div class="doc"><p>Downgrade bodies into expressions.</p></div></div><div class="top"><p class="src"><a name="v:patTHtoAST" class="def">patTHtoAST</a> :: Pat -&gt; <a href="Libraries-Template-LiftQ.html#t:LiftQ">LiftQ</a> <a href="Libraries-Template-Lifting.html#t:Pat">Pat</a></p><div class="doc"><p>Downgrade patterns.</p></div></div><div class="top"><p class="src"><a name="v:firstLevelDecTHtoAST" class="def">firstLevelDecTHtoAST</a> :: Dec -&gt; Maybe (<a href="Libraries-Template-LiftQ.html#t:LiftQ">LiftQ</a> <a href="Libraries-Template-Lifting.html#t:Dec">Dec</a>)</p><div class="doc"><p>Downgrade first-level declarations.</p></div></div><div class="top"><p class="src"><a name="v:decTHtoAST" class="def">decTHtoAST</a> :: Dec -&gt; <a href="Libraries-Template-LiftQ.html#t:LiftQ">LiftQ</a> (<a href="Libraries-Template-Lifting.html#t:Pat">Pat</a>, <a href="Libraries-Template-Lifting.html#t:Exp">Exp</a>)</p><div class="doc"><p>Downgrade any declarations (including the ones in <code>where</code>-constructs).</p></div></div><h1 id="g:4">Upgrade AST to Template Haskell</h1><div class="top"><p class="src"><a name="v:typReturnE" class="def">typReturnE</a> :: <a href="Libraries-Template-LiftQ.html#t:LiftQ">LiftQ</a> Type</p><div class="doc"><p>Abstract syntax tree of the type of the function <code>return</code>.</p></div></div><div class="top"><p class="src"><a name="v:typMAppE" class="def">typMAppE</a> :: <a href="Libraries-Template-LiftQ.html#t:LiftQ">LiftQ</a> Type</p><div class="doc"><p>Abstract syntax tree of the type of the function <code>&gt;&gt;=</code>.</p></div></div><div class="top"><p class="src"><a name="v:litASTtoTH" class="def">litASTtoTH</a> :: <a href="Libraries-Template-Lifting.html#t:Lit">Lit</a> -&gt; Lit</p><div class="doc"><p>Upgrade literals</p></div></div><div class="top"><p class="src"><a name="v:patASTtoTH" class="def">patASTtoTH</a> :: <a href="Libraries-Template-Lifting.html#t:Pat">Pat</a> -&gt; Pat</p><div class="doc"><p>Upgrade patterns.</p></div></div><div class="top"><p class="src"><a name="v:matchASTtoTH" class="def">matchASTtoTH</a> :: <a href="Libraries-Template-Lifting.html#t:Match">Match</a> -&gt; <a href="Libraries-Template-LiftQ.html#t:LiftQ">LiftQ</a> Match</p><div class="doc"><p>Upgrade match-constructs.</p></div></div><div class="top"><p class="src"><a name="v:decASTtoTH" class="def">decASTtoTH</a> :: <a href="Libraries-Template-Lifting.html#t:Dec">Dec</a> -&gt; <a href="Libraries-Template-LiftQ.html#t:LiftQ">LiftQ</a> Dec</p><div class="doc"><p>Upgrade declarations.</p></div></div><div class="top"><p class="src"><a name="v:expASTtoTH" class="def">expASTtoTH</a> :: <a href="Libraries-Template-Lifting.html#t:Exp">Exp</a> -&gt; <a href="Libraries-Template-LiftQ.html#t:LiftQ">LiftQ</a> Exp</p><div class="doc"><p>Upgrade expressions.</p></div></div><h1 id="g:5">Lifting AST terms (into AST terms)</h1><div class="top"><p class="src"><a name="v:liftIntegerL" class="def">liftIntegerL</a> :: <a href="Libraries-Template-Lifting.html#t:Exp">Exp</a></p><div class="doc"><p>Variable referring to the lifting function for integers.</p></div></div><div class="top"><p class="src"><a name="v:liftRationalL" class="def">liftRationalL</a> :: <a href="Libraries-Template-Lifting.html#t:Exp">Exp</a></p><div class="doc"><p>Variable referring to the lifting function for reals.</p></div></div><div class="top"><p class="src"><a name="v:liftLitAST" class="def">liftLitAST</a> :: <a href="Libraries-Template-Lifting.html#t:Lit">Lit</a> -&gt; <a href="Libraries-Template-LiftQ.html#t:LiftQ">LiftQ</a> <a href="Libraries-Template-Lifting.html#t:Exp">Exp</a></p><div class="doc"><p>Lifting literals.</p></div></div><div class="top"><p class="src"><a name="v:liftPatAST" class="def">liftPatAST</a> :: <a href="Libraries-Template-Lifting.html#t:Pat">Pat</a> -&gt; <a href="Libraries-Template-LiftQ.html#t:LiftQ">LiftQ</a> <a href="Libraries-Template-Lifting.html#t:Pat">Pat</a></p><div class="doc"><p>Lifting patterns.</p></div></div><div class="top"><p class="src"><a name="v:liftMatchAST" class="def">liftMatchAST</a> :: <a href="Libraries-Template-Lifting.html#t:Match">Match</a> -&gt; <a href="Libraries-Template-LiftQ.html#t:LiftQ">LiftQ</a> <a href="Libraries-Template-Lifting.html#t:Match">Match</a></p><div class="doc"><p>Lifting match-constructs.</p></div></div><div class="top"><p class="src"><a name="v:liftDecAST" class="def">liftDecAST</a> :: <a href="Libraries-Template-Lifting.html#t:Dec">Dec</a> -&gt; <a href="Libraries-Template-LiftQ.html#t:LiftQ">LiftQ</a> <a href="Libraries-Template-Lifting.html#t:Dec">Dec</a></p><div class="doc"><p>Lifting declarations.</p></div></div><div class="top"><p class="src"><a name="v:liftFirstLevelDecAST" class="def">liftFirstLevelDecAST</a> :: <a href="Libraries-Template-Lifting.html#t:Dec">Dec</a> -&gt; <a href="Libraries-Template-LiftQ.html#t:LiftQ">LiftQ</a> <a href="Libraries-Template-Lifting.html#t:Dec">Dec</a></p><div class="doc"><p>Lifting first-level declarations.</p></div></div><div class="top"><p class="src"><a name="v:liftExpAST" class="def">liftExpAST</a> :: <a href="Libraries-Template-Lifting.html#t:Exp">Exp</a> -&gt; <a href="Libraries-Template-LiftQ.html#t:LiftQ">LiftQ</a> <a href="Libraries-Template-Lifting.html#t:Exp">Exp</a></p><div class="doc"><p>Lifting expressions.</p></div></div><div class="top"><p class="src"><a name="v:makeDecTemplate" class="def">makeDecTemplate</a> :: <a href="Libraries-Template-Lifting.html#t:Dec">Dec</a> -&gt; <a href="Libraries-Template-LiftQ.html#t:LiftQ">LiftQ</a> <a href="Libraries-Template-Lifting.html#t:Dec">Dec</a></p><div class="doc"><p>make a declaration into a template-declaration (by renaming with
 the template-prefix).</p></div></div><h1 id="g:6">Various pretty printing functions</h1><div class="top"><p class="src"><a name="v:prettyPrintAST" class="def">prettyPrintAST</a> :: Q [Dec] -&gt; IO ()</p><div class="doc"><p>pretty-printing Template Haskell declarations.</p></div></div><div class="top"><p class="src"><a name="v:prettyPrintLiftExpTH" class="def">prettyPrintLiftExpTH</a> :: Q Exp -&gt; IO ()</p><div class="doc"><p>Pretty-printing Template Haskell expressions.</p></div></div><div class="top"><p class="src"><a name="v:prettyPrintLiftExpAST" class="def">prettyPrintLiftExpAST</a> :: <a href="Libraries-Template-LiftQ.html#t:LiftQ">LiftQ</a> <a href="Libraries-Template-Lifting.html#t:Exp">Exp</a> -&gt; IO ()</p><div class="doc"><p>Pretty-printing expressions.</p></div></div><h1 id="g:7">The main lifting functions.</h1><div class="top"><p class="src"><a name="v:decToMonad" class="def">decToMonad</a> :: String -&gt; Q [Dec] -&gt; Q [Dec]</p><div class="doc"><p>Lift a list of declarations. The first argument is the name of
 the monad to lift into.</p></div></div><div class="top"><p class="src"><a name="v:expToMonad" class="def">expToMonad</a> :: String -&gt; Q Exp -&gt; Q Exp</p><div class="doc"><p>Lift an expression. The first argument is the name of the monad
 to lift into.</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.14.3</p></div></body></html>